<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Fashion Metaverse Lab</title>
		<link rel="stylesheet" href="css/index.css">
	</head>
	<body>
		<!-- Main text-->
		<div id="info">
			<h1>Fashion Metaverse Lab</h1>
			<h2><span class="rd1">MOVE:</span> ←↑↓→ / WASD <span class="rd1">| RUN:</span> Shift + Move <span class="rd1">| JUMP:</span> Space</h2>
		</div>
		
		<!-- menu-->
		<div id="menu">
			<svg version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve" onclick="openNav()">
				<g>
					<rect y="16" class="st0" width="86.398" height="80"></rect>
					<rect x="166.398" y="16" class="st0" width="345.602" height="80"></rect>
					<rect y="216" class="st0" width="86.398" height="80"></rect>
					<rect x="166.398" y="216" class="st0" width="345.602" height="80"></rect>
					<rect y="416" class="st0" width="86.398" height="80"></rect>
					<rect x="166.398" y="416" class="st0" width="345.602" height="80"></rect>
				</g>
			</svg>
		</div>

		<div id="myNav" class="overlay">
			<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
			<div class="overlay-content">
			  <a href="#about" class="myNav_1" onclick="openMyNav1()">About</a>
			  <a href="#guide" class="myNav_2" onclick="openMyNav2()">Instructions</a>
			  <a href="#setting" class="myNav_3" onclick="openMyNav3()">Setting</a>
			  <a href="#contact" class="myNav_4" onclick="openMyNav4()">Contact</a>
			</div>

			<div id="myNav2" class="overlay-icon">
				<svg version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve" onclick="openMyNav1()">
					<g>
						<path class="st0" d="M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M256,86.069
						c28.463,0,51.538,23.074,51.538,51.538c0,28.464-23.074,51.538-51.538,51.538c-28.463,0-51.538-23.074-51.538-51.538
						C204.462,109.143,227.537,86.069,256,86.069z M310.491,425.931H201.51v-43.593h35.667V276.329H215.38v-43.593h65.389v3.963v39.63
						v106.009h29.722V425.931z"></path>
					</g>
				</svg>
				<P></P><br>
				<svg version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve" onclick="openMyNav2()">
					<g>
						<path class="st0" d="M490.013,171.964H340.031V21.992C340.031,9.845,330.177,0,318.032,0h-124.08c-12.146,0-22,9.845-22,21.992
						v149.973H21.987c-12.146,0-21.983,9.845-21.983,21.992v124.096c0,12.145,9.837,21.983,21.983,21.983h149.966v149.981
						c0,12.138,9.853,21.983,22,21.983h124.08c12.146,0,21.999-9.845,21.999-21.983V340.036h149.982
						c12.146,0,21.983-9.838,21.983-21.983V193.956C511.996,181.81,502.159,171.964,490.013,171.964z M92.897,293.499l-59.072-37.496
						l59.072-37.503V293.499z M256,478.179l-37.495-59.072h74.974L256,478.179z M218.505,92.9l37.479-59.08l37.495,59.08H218.505z
						 M419.103,293.499v-74.998l59.072,37.496L419.103,293.499z"></path>
					</g>
				</svg>
				<P></P><br>
				  <svg version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve" onclick="openMyNav3()">
					<g>
						<path class="st0" d="M497.569,215.169l-55.341-13.064c-4.037-13.955-9.495-27.277-16.376-39.735l29.844-48.304
						c4.57-7.395,3.45-16.945-2.688-23.084l-31.992-31.991c-6.128-6.129-15.67-7.248-23.073-2.68l-48.286,29.854
						c-12.468-6.881-25.789-12.348-39.734-16.376l-13.064-55.368c-2-8.44-9.551-14.422-18.23-14.422h-45.24
						c-8.679,0-16.22,5.982-18.22,14.422L202.105,69.79c-13.955,4.028-27.276,9.478-39.735,16.376l-48.304-29.871
						c-7.386-4.551-16.945-3.441-23.084,2.697L58.992,90.974c-6.129,6.137-7.248,15.706-2.689,23.082l29.863,48.313
						c-6.881,12.458-12.349,25.78-16.367,39.716L14.422,215.15C5.982,217.169,0,224.701,0,233.389v45.231
						c0,8.679,5.982,16.239,14.422,18.229L69.8,309.914c4.028,13.945,9.486,27.257,16.367,39.707l-29.872,48.322
						c-4.551,7.394-3.441,16.954,2.697,23.101l31.982,31.973c6.138,6.147,15.706,7.256,23.082,2.688l48.322-29.872
						c12.469,6.89,25.79,12.349,39.726,16.367l13.064,55.368c2,8.468,9.541,14.431,18.22,14.431h45.24c8.679,0,16.23-5.964,18.23-14.431
						l13.064-55.368c13.936-4.018,27.258-9.477,39.708-16.367l48.313,29.863c7.403,4.57,16.945,3.45,23.092-2.688l31.982-31.992
						c6.128-6.128,7.248-15.688,2.678-23.083l-29.863-48.304c6.899-12.45,12.349-25.771,16.377-39.716l55.368-13.065
						c8.468-2,14.422-9.541,14.422-18.229V233.38C512,224.71,506.036,217.169,497.569,215.169z M255.995,397.319
						c-78.001,0-141.296-63.295-141.296-141.324c0-78.038,63.296-141.324,141.296-141.324c78.03,0,141.324,63.286,141.324,141.324
						C397.319,334.024,334.025,397.319,255.995,397.319z"></path>
						<path class="st0" d="M256.005,180.507c-41.671,0-75.469,33.809-75.469,75.488c0,41.68,33.798,75.488,75.469,75.488
						c41.68,0,75.487-33.808,75.487-75.488C331.492,214.316,297.684,180.507,256.005,180.507z"></path>
					</g>
				</svg>
				<P></P><br>
				<svg version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve" onclick="openMyNav4()">
					<g>
						<path class="st0" d="M432.469,0.01H79.531C35.61,0.01,0,35.62,0,79.541v0.232l219.118,199.838
						c10.505,9.572,23.592,14.271,36.872,14.29c13.301-0.02,26.368-4.718,36.873-14.29L512,79.773v-0.232
						C512,35.62,476.389,0.01,432.469,0.01z"></path>
						<path class="st0" d="M255.99,353.55c-27.532,0.019-55.279-10-77.064-29.863L0,160.508v271.951c0,43.92,35.61,79.531,79.531,79.531
						h352.938c43.92,0,79.531-35.611,79.531-79.531V160.508L333.056,323.687C311.289,343.55,283.543,353.568,255.99,353.55z"></path>
					</g>
				</svg>
				<P></P><br><br><P></P><br><br>
				<svg version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve" onclick="closeNav()">
					<g>
						<polygon class="st0" points="512,89.75 422.256,0.005 256.004,166.256 89.754,0.005 0,89.75 166.255,256 0,422.25 89.754,511.995 
						256.004,345.745 422.26,511.995 512,422.25 345.744,256"></polygon>
					</g>
				</svg>
				</div>
		  </div>

		<!-- Open & Close Panel -->
		<script>
			function openNav() {
				document.getElementById("myNav").style.width = "15%";
			}
			
			function closeNav() {
				closeContent()
				document.getElementById("myNav").style.width = "0%"; 
			}

			function openMyNav1() {
				document.getElementById("MyNav1").style.width = "85%";
				document.getElementById("MyNav2").style.width = "0%";
				document.getElementById("MyNav3").style.width = "0%";
				document.getElementById("MyNav4").style.width = "0%";
			}
			function openMyNav2() {
				document.getElementById("MyNav1").style.width = "0%";
				document.getElementById("MyNav2").style.width = "85%";
				document.getElementById("MyNav3").style.width = "0%";
				document.getElementById("MyNav4").style.width = "0%";
			}
			function openMyNav3() {
				document.getElementById("MyNav1").style.width = "0%";
				document.getElementById("MyNav2").style.width = "0%";
				document.getElementById("MyNav3").style.width = "85%";
				document.getElementById("MyNav4").style.width = "0%";
			}
			function openMyNav4() {
				document.getElementById("MyNav1").style.width = "0%";
				document.getElementById("MyNav2").style.width = "0%";
				document.getElementById("MyNav3").style.width = "0%";
				document.getElementById("MyNav4").style.width = "85%";
			}
			function closeContent() {
				document.getElementById("myNav").style.transitionDelay="0.5s";
				document.getElementById("MyNav1").style.width = "0%";
				document.getElementById("MyNav2").style.width = "0%";
				document.getElementById("MyNav3").style.width = "0%";
				document.getElementById("MyNav4").style.width = "0%";
			}
			document.addEventListener('keydown', function(event){
				if(event.key === "Escape"){
					closeNav()
				}
			})
			
		</script>

		<!-- about -->
		<div id="MyNav1" class="overlay_about">
			<a href="javascript:void(0)" class="closebtn" onclick="closeContent()"><b>&lharu;</b></a>
			<div id="about" class="text">
				<h3>ABOUT</h3>
				<p>This is a fashion metaverse lab.</p>
				<p></p>
				<h3>Credit</h3>
				<p>This work is based on:</p>
				<p>
					<li class = "hangingindent"><a href="https://sketchfab.com/3d-models/clothing-store-507070cebf784389bfe8a47a99dbd0ca">"Clothing Store"</a> by <a href="https://sketchfab.com/lizhiqiang89">lizhiqiang</a> (<a href="http://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a>)</li>
					<li class = "hangingindent"><a href="https://sketchfab.com/3d-models/random-ass-rigged-base-675b5bb60cfe47248cb986b13187bcb7">"random ass rigged Base"</a> by <a href="https://sketchfab.com/Olumide">Midé</a> (<a href="http://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a>)</li>
					</p>
			</div>
		</div>
		
		<!-- instruction -->
		<div id="MyNav2" class="overlay_about">
			<a href="javascript:void(0)" class="closebtn" onclick="closeContent()"><b>&lharu;</b></a>
			<div id="guide" class="text">
				<h3>INSTRUCTION</h3>
				<p><b>MOVE:</b> ←↑↓→ / WASD | <b>RUN:</b> Shift + Move | <b>JUMP:</b> Space</p>
				<p><b>CLOSE:</b> Esc</p>
			</div>
		</div>

		<!-- setting -->
		<div id="MyNav3" class="overlay_about">
			<a href="javascript:void(0)" class="closebtn" onclick="closeContent()"><b>&lharu;</b></a>
			<div id="setting" class="text">
				<h3>SETTING</h3>
				<p>...</p>
			</div>
		</div>

		<!-- contact -->
		<div id="MyNav4" class="overlay_about">
			<a href="javascript:void(0)" class="closebtn" onclick="closeContent()"><b>&lharu;</b></a>
			<div id="contact" class="text">
				<h3>CONTACT</h3>
				<p>...</p>
			</div>
		</div>
		
		<!-- THREE.JS -->
		<script src="js/three.js"></script>	
		<script src="js/OrbitControls.js"></script>	
		<script type="module" src="js/GLTFLoader.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>		
		
		<script type="module">
		import { GLTFLoader } from './js/GLTFLoader.js';

		//Creating new 3D scene
		const scene = new THREE.Scene();
		scene.background = new THREE.Color(0xefefef);
		scene.fog = new THREE.FogExp2( 0xcccccc, 0.0001 );

		//Set Camera
		const camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );

		//Set Renderer
		const renderer = new THREE.WebGLRenderer( {alpha:true, antialias:true} );
		renderer.shadowMap.enabled = true;
		renderer.shadowMap.type = THREE.PCFSoftShadowMap; // default THREE.PCFShadowMap
		renderer.setSize( window.innerWidth, window.innerHeight );
		document.body.appendChild( renderer.domElement );			

		//Set Controls
		const controls = new THREE.OrbitControls( camera, renderer.domElement );
		camera.position.set( 10, 250, 1150);
		controls.update();
		

		//Set Light
		const AmbientLight = new THREE.AmbientLight( 0x9EB1BA ); // This light globally illuminates all objects in the scene equally.
		scene.add( AmbientLight );
		const HemisphereLight = new THREE.HemisphereLight( 0xFFFFFF, 0x080820, 1 ); //A light source positioned directly above the scene, with color fading from the sky color to the ground color.
		scene.add( HemisphereLight );
		
		const PointLight = new THREE.PointLight( 0xA0C4D4, 5, 100 );
		PointLight.position.set( 0, 500, 125 );
		scene.add( PointLight );
		const PointLight2 = new THREE.PointLight( 0xA0C4D4, 5, 100 );
		PointLight2.position.set( 0, 500, -125 );
		scene.add( PointLight2 );
		
		//Load 3D Objects
		const loader = new GLTFLoader();

		//store
		var store;
		loader.load(
			"obj/clothing_store/scene.gltf",
			function (gltf) 
				{
				store = gltf.scene;
				store.scale.set(1,1,1);
				store.position.set( 0, 0, 0);
				scene.add( store );
				}
			);

		//avatar
			var avatar;
		loader.load(
			"obj/random_ass_rigged_base/scene.gltf",
			function (gltf) 
				{
				avatar = gltf.scene;
				avatar.scale.set(65,65,65);
				avatar.position.set( 0, 0, 700);
				scene.add( avatar );
				}
			);

		//Update on resize window
		window.addEventListener( 'resize', onWindowResize, false );

		function onWindowResize(){

		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
		renderer.setSize( window.innerWidth, window.innerHeight );
		};
		

		//Create animate loop to draw the scene every time the screen is refreshed-->
		const animate = function () {

			//Rendering the scene
			requestAnimationFrame( animate );
			renderer.render( scene, camera );
			controls.update();
		};

		//Render scene
		animate();

		</script>

	</body>
</html>